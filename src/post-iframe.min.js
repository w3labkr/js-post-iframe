!function(){function e(e){var t=(e=e||{}).element||e.selector&&document.querySelector(e.selector);if(!t){console.error('PostIframe: A valid element must be provided using the "element" or "selector" option.');return}if(!e.src&&!e.srcdoc){console.error('PostIframe: Either the "src" or "srcdoc" option is required.');return}t._instance&&(t._instance=null),this.element=t,this.src=e.src,this.srcdoc=e.srcdoc||"",this.sandbox=e.sandbox||"allow-forms allow-scripts allow-same-origin",this.onComplete="function"==typeof e.onComplete?e.onComplete:null,this.onStart="function"==typeof e.onStart?e.onStart:null,this.postMessageMessage=e.postMessageMessage||{type:"referrer",referrer:window.location.origin+window.location.pathname},this.postMessageTargetOrigin=e.postMessageTargetOrigin||window.location.origin,t._instance=this,this.initialize()}e.prototype.initialize=function(){var e=this,t=this.element;e.onStart&&e.onStart(t),t.onload=null;var s=function(){e.src&&t.contentWindow&&t.contentWindow.postMessage(e.postMessageMessage,e.postMessageTargetOrigin),e.onComplete&&e.onComplete(t),t.removeEventListener("load",s)};if(t.addEventListener("load",s),""!==this.srcdoc)t.removeAttribute("src"),t.srcdoc=this.srcdoc;else if(this.src){t.removeAttribute("srcdoc"),t.setAttribute("sandbox",this.sandbox);var o=-1!==this.src.indexOf("?")?"&":"?";t.src=this.src+o+"ver="+Date.now()}},window.PostIframe=e}();
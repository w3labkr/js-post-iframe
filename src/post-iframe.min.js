!function(){function e(e){var s=(e=e||{}).element||e.selector&&document.querySelector(e.selector);if(!s){console.error('PostIframe: You must provide a valid element using the "element" or "selector" option.');return}if(!e.src&&!e.srcdoc){console.error('PostIframe: Either the "src" or "srcdoc" option is required.');return}if(s._instance)return s._instance.update(e),s._instance;this.element=s,this.src=e.src,this.srcdoc=e.srcdoc||"",this.sandbox=e.sandbox||"allow-forms allow-scripts allow-same-origin",this.onLoaded="function"==typeof e.onLoaded?e.onLoaded:null,this.postMessageMessage=e.postMessageMessage||{type:"referrer",referrer:window.location.origin+window.location.pathname},this.postMessageTargetOrigin=e.postMessageTargetOrigin||window.location.origin,s._instance=this,this.loadFrame()}e.prototype.loadFrame=function(){var e=this,s=this.element;s.onload=null;var o=function(){e.src&&s.contentWindow&&s.contentWindow.postMessage(e.postMessageMessage,e.postMessageTargetOrigin),e.onLoaded&&e.onLoaded(s),s.removeEventListener("load",o)};if(s.addEventListener("load",o),""!==this.srcdoc)s.removeAttribute("src"),s.srcdoc=this.srcdoc;else if(this.src){s.removeAttribute("srcdoc"),s.setAttribute("sandbox",this.sandbox);var t=-1!==this.src.indexOf("?")?"&":"?";s.src=this.src+t+"ver="+Date.now()}},e.prototype.update=function(e){void 0!==(e=e||{}).src&&(this.src=e.src),void 0!==e.srcdoc&&(this.srcdoc=e.srcdoc),void 0!==e.sandbox&&(this.sandbox=e.sandbox),void 0!==e.onLoaded&&(this.onLoaded="function"==typeof e.onLoaded?e.onLoaded:null),void 0!==e.postMessageMessage&&(this.postMessageMessage=e.postMessageMessage),void 0!==e.postMessageTargetOrigin&&(this.postMessageTargetOrigin=e.postMessageTargetOrigin),this.loadFrame()},window.PostIframe=e}();
